Item,Regla/Tema,Referencia Legal,Implementación,Estado,Severidad,Evidencia,Acción,Responsable,Fecha Objetivo
NOM-001,Tope Imponible AFP,Ley 20.255 Art. 17,data/l10n_cl_legal_caps_2025.xml línea 52,OK,N/A,✅ Corregido 83.1 UF + tests,P0-1 CERRADO - Ver tests/test_p0_afp_cap_2025.py,Dev Team,2025-11-07
NOM-002,LRE Previred 105 campos,DT Circular 1 - Obligatorio mensual,wizards/hr_lre_wizard.py línea 227-381,OK,N/A,✅ 105 campos implementados + especificación,P0-2 CERRADO - Ver wizards/LRE_105_CAMPOS_ESPECIFICACION.md,Dev Team,2025-11-07
NOM-003,Multi-compañía isolation,Ley 19.628 Protección Datos Personales,security/multi_company_rules.xml,OK,N/A,✅ 4 ir.rule creadas + tests,P0-3 CERRADO - Ver tests/test_p0_multi_company.py,Dev Team,2025-11-07
NOM-004,Tope Imponible Salud,DFL N°1 (2005) Art. 70,models/l10n_cl_legal_caps.py línea 50,OK,N/A,"Parametrizado con vigencias (valid_from/valid_until), valor correcto",Ninguna,N/A,N/A
NOM-005,Tope Seguro Cesantía,Ley 19.728 Art. 8,models/l10n_cl_legal_caps.py,OK,N/A,"Parametrizado con vigencias, valor correcto",Ninguna,N/A,N/A
NOM-006,UF Centralizada,BC Chile - UF oficial,models/hr_economic_indicators.py línea 38,OK,N/A,"Campo uf_value con vigencias, scraper Previred",Ninguna,N/A,N/A
NOM-007,UTM Centralizada,SII - UTM oficial,models/hr_economic_indicators.py línea 41,OK,N/A,"Campo utm_value con vigencias, scraper Previred",Ninguna,N/A,N/A
NOM-008,Tramos Impuesto Único 2025,SII Tabla 2025,models/hr_tax_bracket.py línea 25,OK,N/A,7 tramos correctos con vigencias + tests,Ninguna,N/A,N/A
NOM-009,Rebaja por Carga Familiar,SII Tabla 2025,hr_tax_bracket.py línea 112,OK,N/A,"$14,364/carga según 2025",Ninguna,N/A,N/A
NOM-010,Cotización SIS,DFL N°1 Art. 85,models/hr_payslip.py línea 825,Gap,P1,Implementación básica pero sin tests específicos SIS,"Agregar tests (2 horas)",QA Team,2025-11-09
NOM-011,Aporte Empleador SOPA 2025,Ley Reforma Previsional 2025,models/hr_salary_rule_category_sopa.py línea 15,OK,N/A,9 categorías SOPA con flags + fecha corte 1 agosto 2025,Ninguna,N/A,N/A
NOM-012,Cálculo AFP usa total_imponible,Art. 17 DL 3500,models/hr_payslip.py línea 502,OK,N/A,Usa total_imponible + tope 83.1 UF (corregir dato P0-001),Ver P0-001,Dev Team,2025-11-08
NOM-013,Cálculo Salud usa total_imponible,DFL N°1 Art. 70,models/hr_payslip.py línea 514,OK,N/A,FONASA 7% e ISAPRE sobre total_imponible correcto,Ninguna,N/A,N/A
NOM-014,Seguro Cesantía Empleador/Trabajador,Ley 19.728 Art. 5-8,models/hr_payslip.py línea 758,OK,N/A,Tasas correctas: trabajador 0.6% + empleador 2.4%,Ninguna,N/A,N/A
NOM-015,Gratificación Legal,Código del Trabajo Art. 47,models/hr_payslip.py línea 870,OK,N/A,25% utilidades + tope 4.75 IMM + modalidad anual/mensual,Ninguna,N/A,N/A
NOM-016,Parametría sin hardcoding,Buena práctica + mantenibilidad,modelos paramétricos,OK,N/A,Topes/tasas/tramos en modelos con vigencias (no hardcoded),Ninguna,N/A,N/A
NOM-017,Uso de valid_from/valid_until,Arquitectura parametría,l10n_cl_legal_caps.py línea 28,OK,N/A,Todos los topes/tasas tienen vigencias (no campo year),Ninguna,N/A,N/A
NOM-018,Finiquito - Indemnización,Código del Trabajo Art. 163,models/hr_settlement.py línea 88,OK,N/A,Cálculo años servicio + tope 11 años + proporcionales,Ninguna,N/A,N/A
NOM-019,Finiquito - Vacaciones Proporcionales,Código del Trabajo Art. 73,hr_settlement.py línea 142,OK,N/A,1.25 días/mes trabajado,Ninguna,N/A,N/A
NOM-020,LRE Campo 1-10 Empresa,DT Circular 1 Sección A,wizards/hr_lre_wizard.py línea 85,OK,N/A,RUT + razón social + dirección + período + otros,Ninguna,N/A,N/A
NOM-021,LRE Campo 11-29 Trabajador,DT Circular 1 Sección B,hr_lre_wizard.py línea 168,OK,N/A,RUT + nombres + AFP + salud + cargas + otros,Ninguna,N/A,N/A
NOM-022,LRE Campos 30-105 Faltantes,DT Circular 1 Secciones C-H,hr_lre_wizard.py,Gap,P0,Faltan secciones: remuneraciones imponibles detalladas + descuentos + otros,"Implementar 76 campos (ver P0-002)",Dev Team,2025-11-08
NOM-023,LRE Validación Formato,DT requisito archivo,hr_lre_wizard.py línea 388,Gap,P1,Existe validación básica pero no contra formato oficial DT,"Validar vs schema oficial (4 horas)",Dev Team,2025-11-09
NOM-024,Audit Trail Art. 54 CT,Código del Trabajo Art. 54,models/,Gap,P1,No existe modelo hr.payroll.audit.trail rescatado de Odoo 11,"Implementar audit trail (3 horas)",Dev Team,2025-11-09
NOM-025,Retención 7 años datos,Código del Trabajo Art. 54,políticas retención,Gap,P1,No existen políticas ni tests de retención,"Configurar retención + tests (2 horas)",Dev Team,2025-11-09
NOM-026,Reporte Liquidación PDF,Código del Trabajo Art. 54 (obligatorio),reports/,Gap,P2,No existe reporte QWeb para liquidación,"Crear reporte QWeb (6 horas)",Dev Team,2025-11-10
NOM-027,Reporte Finiquito PDF,Código del Trabajo Art. 177 (obligatorio),reports/,Gap,P2,No existe reporte QWeb legal para finiquito,"Crear reporte QWeb (4 horas)",Dev Team,2025-11-10
NOM-028,Centralización Indicadores,Arquitectura,hr_economic_indicators.py,OK,N/A,UF/UTM/Sueldo Mínimo/Topes en un solo lugar,Ninguna,N/A,N/A
NOM-029,Scraper Previred,Actualización automática,../../ai-service/payroll/previred_scraper.py,OK,N/A,Scraper funcional para indicadores mensuales,Ninguna,N/A,N/A
NOM-030,Tests Unitarios Cálculos,Calidad + regresión,tests/,OK,N/A,"11 suites, 53 tests, ~2,734 líneas código",Ninguna,N/A,N/A
NOM-031,Cobertura Testing,Calidad,tests/,Gap,P2,Cobertura ~75% (objetivo 80%),"Agregar tests faltantes (2 días)",QA Team,2025-11-15
NOM-032,Tests Edge Cases,Robustez,tests/,Gap,P2,Faltan tests: redondeos extremos + sueldo cero + carga 5+ hijos,"Agregar tests edge (1 día)",QA Team,2025-11-15
NOM-033,i18n es_CL,Odoo i18n,i18n/es_CL.po,OK,N/A,Traducción español Chile completa,Ninguna,N/A,N/A
NOM-034,i18n en_US,Odoo i18n,i18n/en_US.po,OK,N/A,Traducción inglés completa,Ninguna,N/A,N/A
NOM-035,ACL Usuario Contable,Odoo ACL,security/ir.model.access.csv línea 15,OK,N/A,Rol hr_officer: read=1 en modelos principales,Ninguna,N/A,N/A
NOM-036,ACL Manager Nómina,Odoo ACL,security/ir.model.access.csv línea 25,OK,N/A,Rol hr_manager: create/write/unlink=1 en todos los modelos,Ninguna,N/A,N/A
NOM-037,Record Rules Multi-company,Odoo multi-company,security/,Gap,P0,No existen ir.rule para isolation,"Crear rules (ver P0-003)",Dev Team,2025-11-08
NOM-038,Validación RUT,Obligatorio Chile,tools/rut_validator.py,OK,N/A,Validación módulo 11 + formato correcto,Ninguna,N/A,N/A
NOM-039,Indicadores Históricos,Trazabilidad,hr_economic_indicators.py,OK,N/A,Datos desde 2018 hasta 2025 disponibles,Ninguna,N/A,N/A
NOM-040,Snapshot Indicadores en Liquidación,Inmutabilidad cálculos,hr_payslip.py línea 288,OK,N/A,Campo indicators_snapshot (Text/JSON) guarda indicadores usados,Ninguna,N/A,N/A
NOM-041,Integración Contable,Odoo accounting,hr_payslip.py línea 1420,Gap,P2,Integración básica pero sin tests específicos,"Agregar tests integración (1 día)",QA Team,2025-11-15
NOM-042,Categorías Salariales,Arquitectura,models/hr_salary_rule_category.py,OK,N/A,Categorías Chile: haberes + descuentos + líquido + imponible,Ninguna,N/A,N/A
NOM-043,Reglas Salariales,Cálculo flexible,models/hr_salary_rule.py,OK,N/A,Engine Python para reglas custom + herencia,Ninguna,N/A,N/A
NOM-044,Campos Contract Chile,Localización,models/hr_contract.py línea 42,OK,N/A,30+ campos específicos Chile: AFP + ISAPRE + cargas + zona extrema,Ninguna,N/A,N/A
NOM-045,Wizard Previred,Usabilidad,wizards/hr_lre_wizard.py,OK,N/A,Wizard para exportación LRE (completar P0-002),Ver P0-002,Dev Team,2025-11-08
NOM-046,Wizard Finiquito,Usabilidad,wizards/hr_settlement_wizard.py,OK,N/A,Wizard para generación finiquito (agregar PDF P2-027),Ver P2-027,Dev Team,2025-11-10
NOM-047,Maestros AFPs,Datos base,data/hr_afp_data.xml,OK,N/A,10 AFPs con comisiones actualizadas,Ninguna,N/A,N/A
NOM-048,Maestros ISAPREs,Datos base,data/hr_isapre_data.xml,OK,N/A,15 ISAPREs principales,Ninguna,N/A,N/A
NOM-049,Performance Cálculo Masivo,Escalabilidad,N/A,Gap,P3,No existen tests de performance para cálculo 100+ empleados,"Agregar test stress (1 día)",QA Team,2025-11-20
NOM-050,Documentación Código,Mantenibilidad,todos los modelos,Gap,P3,Falta docstrings en algunos métodos,"Completar docstrings (2 días)",Dev Team,2025-11-30
