time="2025-11-09T01:23:46-03:00" level=warning msg="Found orphan containers ([odoo19_eergy_services odoo19_rabbitmq]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
 Container odoo19_redis  Running
 Container odoo19_db  Running
2025-11-09 04:23:48,034 1 INFO ? odoo: Odoo version 19.0-20251021 
2025-11-09 04:23:48,034 1 INFO ? odoo: Using configuration file at /etc/odoo/odoo.conf 
2025-11-09 04:23:48,034 1 INFO ? odoo: addons paths: _NamespacePath(['/usr/lib/python3/dist-packages/odoo/addons', '/var/lib/odoo/addons/19.0', '/mnt/extra-addons/localization', '/usr/lib/python3/dist-packages/addons']) 
2025-11-09 04:23:48,034 1 INFO ? odoo: database: odoo@db:5432 
2025-11-09 04:23:48,200 1 WARNING ? odoo.service.server: Unit testing in workers mode could fail; use --workers 0. 
2025-11-09 04:23:48,200 1 INFO ? odoo.service.server: HTTP service (werkzeug) running on 0.0.0.0:8069 
2025-11-09 04:23:48,211 1 INFO odoo19 odoo.tests.common: Importing test framework 
2025-11-09 04:23:48,220 1 INFO odoo19 odoo.modules.loading: loading 1 modules... 
2025-11-09 04:23:48,461 1 INFO odoo19 odoo.modules.loading: 1 modules loaded in 0.24s, 0 queries (+0 extra) 
2025-11-09 04:23:48,467 1 WARNING odoo19 odoo.modules.module: Missing `license` key in manifest for 'hr_contract', defaulting to LGPL-3 
2025-11-09 04:23:48,471 1 INFO odoo19 odoo.modules.loading: loading 72 modules... 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,855 1 WARNING odoo19 odoo.registry: Model attribute '_sql_constraints' is no longer supported, please define model.Constraint on the model. 
2025-11-09 04:23:48,905 1 WARNING odoo19 odoo.fields: hr.contract.gratification_type: selection=[('legal', 'Legal (Art. 50 CT)'), ('fixed_monthly', 'Fija Mensual'), ('mixed', 'Mixta'), ('none', 'Sin Gratificación')] overrides existing selection; use selection_add instead 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.salary.rule.category.parent_path: unknown parameter 'unaccent', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.name: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.employee_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.contract_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.struct_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_from: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_to: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,917 1 WARNING odoo19 odoo.fields: Field hr.payslip.input_line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:48,946 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_company_currency_id_fields: Starting TestCompanyCurrencyIdFields.test_company_currency_id_functional ... 
2025-11-09 04:23:49,011 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract Currency para empleado Test Employee Currency (2025-01-01 - Indefinido) 
2025-11-09 04:23:49,015 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_company_currency_id_fields: Starting TestCompanyCurrencyIdFields.test_payslip_has_company_currency_id ... 
2025-11-09 04:23:49,042 1 WARNING odoo19 odoo.fields: hr.contract.gratification_type: selection=[('legal', 'Legal (Art. 50 CT)'), ('fixed_monthly', 'Fija Mensual'), ('mixed', 'Mixta'), ('none', 'Sin Gratificación')] overrides existing selection; use selection_add instead 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.salary.rule.category.parent_path: unknown parameter 'unaccent', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.name: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.employee_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.contract_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.struct_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_from: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_to: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,053 1 WARNING odoo19 odoo.fields: Field hr.payslip.input_line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,068 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 1 checked, 1 removed 
2025-11-09 04:23:49,069 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_hr_contract_stub_ce: Starting TestHrContractStubCE.test_contract_actions ... 
2025-11-09 04:23:49,114 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Actions Contract para empleado Test Employee Contract Stub (2025-01-01 - Indefinido) 
2025-11-09 04:23:49,114 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE modificado: Test Actions Contract (Estado: open, Sueldo: 1500000.0) 
2025-11-09 04:23:49,114 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato Test Actions Contract activado para empleado Test Employee Contract Stub 
2025-11-09 04:23:49,115 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE modificado: Test Actions Contract (Estado: close, Sueldo: 1500000.0) 
2025-11-09 04:23:49,115 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato Test Actions Contract cerrado para empleado Test Employee Contract Stub 
2025-11-09 04:23:49,115 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_hr_contract_stub_ce: Starting TestHrContractStubCE.test_contract_create_basic ... 
2025-11-09 04:23:49,140 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee Contract Stub (2025-01-01 - Indefinido) 
2025-11-09 04:23:49,141 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_hr_contract_stub_ce: Starting TestHrContractStubCE.test_contract_dates_coherence ... 
2025-11-09 04:23:49,168 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_hr_contract_stub_ce: Starting TestHrContractStubCE.test_contract_overlap_prevention ... 
2025-11-09 04:23:49,192 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract 1 para empleado Test Employee Contract Stub (2025-01-01 - 2025-12-31) 
2025-11-09 04:23:49,197 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_hr_contract_stub_ce: Starting TestHrContractStubCE.test_contract_wage_positive_constraint ... 
2025-11-09 04:23:49,251 1 WARNING odoo19 odoo.fields: hr.contract.gratification_type: selection=[('legal', 'Legal (Art. 50 CT)'), ('fixed_monthly', 'Fija Mensual'), ('mixed', 'Mixta'), ('none', 'Sin Gratificación')] overrides existing selection; use selection_add instead 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.salary.rule.category.parent_path: unknown parameter 'unaccent', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.name: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.employee_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.contract_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.struct_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_from: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_to: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,263 1 WARNING odoo19 odoo.fields: Field hr.payslip.input_line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,279 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 1 checked, 1 removed 
2025-11-09 04:23:49,279 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_01_no_aplica_antes_agosto_2025 ... 
2025-11-09 04:23:49,326 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Pre-Ley para empleado Test Employee Ley 21.735 (2024-01-01 - Indefinido) 
2025-11-09 04:23:49,335 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,335 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_01_no_aplica_antes_agosto_2025
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 65, in test_01_no_aplica_antes_agosto_2025
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,335 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_02_aplica_desde_agosto_2025 ... 
2025-11-09 04:23:49,362 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Post-Ley para empleado Test Employee Ley 21.735 (2025-08-01 - Indefinido) 
2025-11-09 04:23:49,368 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,368 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_02_aplica_desde_agosto_2025
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 106, in test_02_aplica_desde_agosto_2025
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,368 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_03_calculo_cuenta_individual_01_percent ... 
2025-11-09 04:23:49,392 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test 0.1% para empleado Test Employee Ley 21.735 (2025-08-01 - Indefinido) 
2025-11-09 04:23:49,399 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,399 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_03_calculo_cuenta_individual_01_percent
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 142, in test_03_calculo_cuenta_individual_01_percent
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,399 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_04_calculo_seguro_social_09_percent ... 
2025-11-09 04:23:49,424 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test 0.9% para empleado Test Employee Ley 21.735 (2025-08-01 - Indefinido) 
2025-11-09 04:23:49,430 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,430 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_04_calculo_seguro_social_09_percent
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 174, in test_04_calculo_seguro_social_09_percent
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,430 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_05_total_es_suma_01_mas_09 ... 
2025-11-09 04:23:49,459 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test Total para empleado Test Employee Ley 21.735 (2025-08-01 - Indefinido) 
2025-11-09 04:23:49,466 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,466 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_05_total_es_suma_01_mas_09
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 206, in test_05_total_es_suma_01_mas_09
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,466 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_06_validation_blocks_missing_aporte ... 
2025-11-09 04:23:49,500 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test Validación para empleado Test Employee Ley 21.735 (2025-08-01 - Indefinido) 
2025-11-09 04:23:49,505 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Payslip Test Validación: Ley 21.735 aplicada. Base: $1,000,000, Cuenta Individual (0.1%): $1,000, Seguro Social (0.9%): $9,000, Total (1%): $10,000 
2025-11-09 04:23:49,525 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,525 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_06_validation_blocks_missing_aporte
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 257, in test_06_validation_blocks_missing_aporte
    payslip.write({'state': 'done'})
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 383, in write
    result = super().write(vals)
             ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4488, in write
    real_recs._validate_fields(vals, inverse_fields)
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 570, in _validate_payslip_before_confirm
    if not payslip.employer_reforma_2025 or payslip.employer_reforma_2025 == 0:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:49,526 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_07_multiples_salarios_precision ... 
2025-11-09 04:23:49,558 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato $500,000 para empleado Test Employee Ley 21.735 (2025-08-01 - Indefinido) 
2025-11-09 04:23:49,565 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,565 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: Subtest TestLey21735ReformaPensiones.test_07_multiples_salarios_precision (wage=500000)
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 293, in test_07_multiples_salarios_precision
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,568 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,568 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: Subtest TestLey21735ReformaPensiones.test_07_multiples_salarios_precision (wage=1000000)
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 276, in test_07_multiples_salarios_precision
    contract = self.env['hr.contract'].create({
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Ley 21.735 en el período 2025-08-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:49,569 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,569 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: Subtest TestLey21735ReformaPensiones.test_07_multiples_salarios_precision (wage=2500000)
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 276, in test_07_multiples_salarios_precision
    contract = self.env['hr.contract'].create({
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Ley 21.735 en el período 2025-08-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:49,571 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,571 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: Subtest TestLey21735ReformaPensiones.test_07_multiples_salarios_precision (wage=5000000)
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 276, in test_07_multiples_salarios_precision
    contract = self.env['hr.contract'].create({
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Ley 21.735 en el período 2025-08-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:49,571 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_08_contratos_anteriores_agosto_vigentes_post_agosto ... 
2025-11-09 04:23:49,600 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Abril 2025 para empleado Test Employee Ley 21.735 (2025-04-01 - Indefinido) 
2025-11-09 04:23:49,608 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,608 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_08_contratos_anteriores_agosto_vigentes_post_agosto
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 330, in test_08_contratos_anteriores_agosto_vigentes_post_agosto
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,608 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_09_wage_cero_no_genera_aporte ... 
2025-11-09 04:23:49,633 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,633 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_09_wage_cero_no_genera_aporte
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 348, in test_09_wage_cero_no_genera_aporte
    contract = self.env['hr.contract'].create({
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 210, in _check_wage_positive
    raise ValidationError(
odoo.exceptions.ValidationError: El sueldo base debe ser mayor a cero.
 
2025-11-09 04:23:49,633 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: Starting TestLey21735ReformaPensiones.test_10_periodos_futuros_2026_aplican ... 
2025-11-09 04:23:49,657 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato 2026 para empleado Test Employee Ley 21.735 (2026-01-01 - Indefinido) 
2025-11-09 04:23:49,663 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ====================================================================== 
2025-11-09 04:23:49,663 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_ley21735_reforma_pensiones: ERROR: TestLey21735ReformaPensiones.test_10_periodos_futuros_2026_aplican
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_ley21735_reforma_pensiones.py", line 394, in test_10_periodos_futuros_2026_aplican
    payslip.compute_sheet()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'compute_sheet'
 
2025-11-09 04:23:49,696 1 WARNING odoo19 odoo.fields: hr.contract.gratification_type: selection=[('legal', 'Legal (Art. 50 CT)'), ('fixed_monthly', 'Fija Mensual'), ('mixed', 'Mixta'), ('none', 'Sin Gratificación')] overrides existing selection; use selection_add instead 
2025-11-09 04:23:49,708 1 WARNING odoo19 odoo.fields: Field hr.salary.rule.category.parent_path: unknown parameter 'unaccent', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.name: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.employee_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.contract_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.struct_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_from: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_to: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,709 1 WARNING odoo19 odoo.fields: Field hr.payslip.input_line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,725 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 1 checked, 1 removed 
2025-11-09 04:23:49,725 1 ERROR odoo19 odoo.modules.loading: Module l10n_cl_hr_payroll: 0 failures, 13 errors of 17 tests 
2025-11-09 04:23:49,725 1 INFO odoo19 odoo.modules.loading: 72 modules loaded in 1.25s, 3 queries (+1331 extra) 
2025-11-09 04:23:49,752 1 WARNING odoo19 odoo.fields: hr.contract.gratification_type: selection=[('legal', 'Legal (Art. 50 CT)'), ('fixed_monthly', 'Fija Mensual'), ('mixed', 'Mixta'), ('none', 'Sin Gratificación')] overrides existing selection; use selection_add instead 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.salary.rule.category.parent_path: unknown parameter 'unaccent', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.name: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.employee_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.contract_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.struct_id: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_from: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.date_to: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,765 1 WARNING odoo19 odoo.fields: Field hr.payslip.input_line_ids: unknown parameter 'states', if this is an actual parameter you may want to override the method _valid_field_parameter on the relevant model in order to allow it 
2025-11-09 04:23:49,781 1 ERROR odoo19 odoo.modules.loading: At least one test failed when loading the modules. 
2025-11-09 04:23:49,878 1 INFO odoo19 odoo.registry: Registry loaded in 1.671s 
2025-11-09 04:23:49,879 1 INFO odoo19 odoo.service.server: Starting post tests 
2025-11-09 04:23:49,908 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_01_apv_regime_a_fixed_clp ... 
2025-11-09 04:23:49,975 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:49,980 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0145 para empleado Test Employee APV 
2025-11-09 04:23:49,984 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:49,985 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:49,989 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV Régimen A: monto=$100,000, tope=$1,950,000, deducible=$100,000 
2025-11-09 04:23:49,989 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $100,000 (Régimen A) - Rebaja tributaria 
2025-11-09 04:23:49,991 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,565,183, impuesto=$25,887 
2025-11-09 04:23:49,992 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:49,993 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:49,994 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0145 completada: 9 líneas, bruto=$2,111,083, líquido=$1,596,463 
2025-11-09 04:23:49,994 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0145 calculada: Líquido = $1,596,463 
2025-11-09 04:23:49,994 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_02_apv_regime_b_fixed_clp ... 
2025-11-09 04:23:50,021 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,024 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0146 para empleado Test Employee APV 
2025-11-09 04:23:50,026 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,027 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,030 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $100,000 (Régimen B) - Sin rebaja 
2025-11-09 04:23:50,032 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,665,183, impuesto=$29,887 
2025-11-09 04:23:50,033 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,033 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,034 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0146 completada: 9 líneas, bruto=$2,111,083, líquido=$1,592,463 
2025-11-09 04:23:50,034 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0146 calculada: Líquido = $1,592,463 
2025-11-09 04:23:50,035 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_03_apv_uf_to_clp_conversion ... 
2025-11-09 04:23:50,062 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,065 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0147 para empleado Test Employee APV 
2025-11-09 04:23:50,067 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,067 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,071 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV Régimen A: monto=$97,500, tope=$1,950,000, deducible=$97,500 
2025-11-09 04:23:50,071 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $97,500 (Régimen A) - Rebaja tributaria 
2025-11-09 04:23:50,073 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,567,683, impuesto=$25,987 
2025-11-09 04:23:50,074 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,075 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,076 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0147 completada: 9 líneas, bruto=$2,111,083, líquido=$1,598,863 
2025-11-09 04:23:50,076 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0147 calculada: Líquido = $1,598,863 
2025-11-09 04:23:50,076 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_04_apv_monthly_cap_applied ... 
2025-11-09 04:23:50,104 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,108 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0148 para empleado Test Employee APV 
2025-11-09 04:23:50,111 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,111 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,115 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV Régimen A: monto=$3,120,000, tope=$1,950,000, deducible=$1,950,000 
2025-11-09 04:23:50,115 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $1,950,000 (Régimen A) - Rebaja tributaria 
2025-11-09 04:23:50,116 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,117 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,118 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0148 completada: 8 líneas, bruto=$2,111,083, líquido=$-227,650 
2025-11-09 04:23:50,118 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0148 calculada: Líquido = $-227,650 
2025-11-09 04:23:50,119 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_05_apv_percent_rli ... 
2025-11-09 04:23:50,151 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,155 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0149 para empleado Test Employee APV 
2025-11-09 04:23:50,158 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,159 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,163 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV Régimen A: monto=$102,083, tope=$1,950,000, deducible=$102,083 
2025-11-09 04:23:50,164 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $102,083 (Régimen A) - Rebaja tributaria 
2025-11-09 04:23:50,166 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,563,100, impuesto=$25,804 
2025-11-09 04:23:50,167 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,167 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,168 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0149 completada: 9 líneas, bruto=$2,111,083, líquido=$1,594,463 
2025-11-09 04:23:50,168 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0149 calculada: Líquido = $1,594,463 
2025-11-09 04:23:50,169 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: ====================================================================== 
2025-11-09 04:23:50,169 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: FAIL: TestAPVCalculation.test_05_apv_percent_rli
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_apv_calculation.py", line 256, in test_05_apv_percent_rli
    self.assertAlmostEqual(
AssertionError: 102083.33 != 100000.0 within 100 delta (2083.3300000000017 difference) : APV debe ser 5% de $2.000.000 = $100.000
 
2025-11-09 04:23:50,170 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_06_apv_not_configured ... 
2025-11-09 04:23:50,198 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,201 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0150 para empleado Test Employee APV 
2025-11-09 04:23:50,203 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,204 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,209 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,665,183, impuesto=$29,887 
2025-11-09 04:23:50,210 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,211 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,212 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0150 completada: 8 líneas, bruto=$2,111,083, líquido=$1,692,463 
2025-11-09 04:23:50,212 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0150 calculada: Líquido = $1,692,463 
2025-11-09 04:23:50,213 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_07_apv_regime_a_tax_rebate ... 
2025-11-09 04:23:50,240 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,243 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0151 para empleado Test Employee APV 
2025-11-09 04:23:50,245 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,245 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,249 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV Régimen A: monto=$150,000, tope=$1,950,000, deducible=$150,000 
2025-11-09 04:23:50,249 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $150,000 (Régimen A) - Rebaja tributaria 
2025-11-09 04:23:50,250 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,515,183, impuesto=$23,887 
2025-11-09 04:23:50,251 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,252 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,253 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0151 completada: 9 líneas, bruto=$2,111,083, líquido=$1,548,463 
2025-11-09 04:23:50,253 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0151 calculada: Líquido = $1,548,463 
2025-11-09 04:23:50,255 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0152 para empleado Test Employee APV 
2025-11-09 04:23:50,256 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,257 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,259 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $150,000 (Régimen B) - Sin rebaja 
2025-11-09 04:23:50,260 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Error calculando impuesto único para payslip LIQ-202511-0152: No se encontró indicador económico para el período February 2025. Por favor, cargue los indicadores del mes. 
2025-11-09 04:23:50,261 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,261 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,262 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0152 completada: 8 líneas, bruto=$2,111,083, líquido=$1,572,350 
2025-11-09 04:23:50,262 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0152 calculada: Líquido = $1,572,350 
2025-11-09 04:23:50,262 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_apv_calculation: Starting TestAPVCalculation.test_08_apv_visible_in_payslip ... 
2025-11-09 04:23:50,288 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Base para empleado Test Employee APV (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,291 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0153 para empleado Test Employee APV 
2025-11-09 04:23:50,293 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,294 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,297 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV Régimen A: monto=$100,000, tope=$1,950,000, deducible=$100,000 
2025-11-09 04:23:50,298 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: APV: $100,000 (Régimen A) - Rebaja tributaria 
2025-11-09 04:23:50,299 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,565,183, impuesto=$25,887 
2025-11-09 04:23:50,300 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,301 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,302 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0153 completada: 9 líneas, bruto=$2,111,083, líquido=$1,596,463 
2025-11-09 04:23:50,302 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0153 calculada: Líquido = $1,596,463 
2025-11-09 04:23:50,304 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 1 checked, 1 removed 
2025-11-09 04:23:50,304 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_afc_calculation ... 
2025-11-09 04:23:50,332 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,334 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,336 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:50,337 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:50,341 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:50,342 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:50,343 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:50,343 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $861,175 
2025-11-09 04:23:50,344 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ====================================================================== 
2025-11-09 04:23:50,344 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: FAIL: TestPayrollCalculationsSprint32.test_afc_calculation
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_calculations_sprint32.py", line 281, in test_afc_calculation
    self.assertAlmostEqual(abs(afc_line.total), expected_afc, delta=10)
AssertionError: 6125.0 != 6000 within 10 delta (125.0 difference)
 
2025-11-09 04:23:50,344 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_afc_tope ... 
2025-11-09 04:23:50,369 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,371 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE modificado: Test Contract (Estado: open, Sueldo: 5000000.0) 
2025-11-09 04:23:50,372 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,374 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$5,000,000, tributable=$5,000,000 
2025-11-09 04:23:50,374 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $104,167 (base: $5,000,000) 
2025-11-09 04:23:50,378 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$4,351,299, impuesto=$279,200 
2025-11-09 04:23:50,379 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $34,578 (1.0% sobre $3,457,834) 
2025-11-09 04:23:50,380 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $113,612 (2.4% sobre $4,733,845) 
2025-11-09 04:23:50,381 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 8 líneas, bruto=$5,252,357, líquido=$4,191,886 
2025-11-09 04:23:50,381 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $4,191,886 
2025-11-09 04:23:50,382 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_allowance_colacion ... 
2025-11-09 04:23:50,409 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,413 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,414 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Procesando 1 inputs para liquidación Test Payslip 
2025-11-09 04:23:50,417 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ====================================================================== 
2025-11-09 04:23:50,417 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ERROR: TestPayrollCalculationsSprint32.test_allowance_colacion
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_calculations_sprint32.py", line 176, in test_allowance_colacion
    self.payslip.action_compute_sheet()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 694, in action_compute_sheet
    self._compute_basic_lines()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 770, in _compute_basic_lines
    self._process_input_lines()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 974, in _process_input_lines
    self._process_allowance(input_line)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 1069, in _process_allowance
    imm = self.indicadores_id.sueldo_minimo
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.economic.indicators' object has no attribute 'sueldo_minimo'
 
2025-11-09 04:23:50,418 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_allowance_tope_legal ... 
2025-11-09 04:23:50,445 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,448 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,449 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Procesando 1 inputs para liquidación Test Payslip 
2025-11-09 04:23:50,452 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ====================================================================== 
2025-11-09 04:23:50,452 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ERROR: TestPayrollCalculationsSprint32.test_allowance_tope_legal
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_calculations_sprint32.py", line 203, in test_allowance_tope_legal
    self.payslip.action_compute_sheet()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 694, in action_compute_sheet
    self._compute_basic_lines()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 770, in _compute_basic_lines
    self._process_input_lines()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 974, in _process_input_lines
    self._process_allowance(input_line)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 1069, in _process_allowance
    imm = self.indicadores_id.sueldo_minimo
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.economic.indicators' object has no attribute 'sueldo_minimo'
 
2025-11-09 04:23:50,452 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_bonus_imponible ... 
2025-11-09 04:23:50,480 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,482 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,483 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Procesando 1 inputs para liquidación Test Payslip 
2025-11-09 04:23:50,485 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,050,000, tributable=$1,050,000 
2025-11-09 04:23:50,486 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:50,490 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,708 (1.0% sobre $1,070,833) 
2025-11-09 04:23:50,491 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $25,700 (2.4% sobre $1,070,833) 
2025-11-09 04:23:50,492 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 8 líneas, bruto=$1,107,242, líquido=$903,355 
2025-11-09 04:23:50,492 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $903,355 
2025-11-09 04:23:50,492 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ====================================================================== 
2025-11-09 04:23:50,492 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: FAIL: TestPayrollCalculationsSprint32.test_bonus_imponible
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_calculations_sprint32.py", line 154, in test_bonus_imponible
    self.assertAlmostEqual(self.payslip.total_imponible, expected_imponible, delta=10)
AssertionError: 1070833.33 != 1050000 within 10 delta (20833.330000000075 difference)
 
2025-11-09 04:23:50,493 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_full_payslip_with_inputs ... 
2025-11-09 04:23:50,520 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,523 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,525 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Procesando 3 inputs para liquidación Test Payslip 
2025-11-09 04:23:50,529 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ====================================================================== 
2025-11-09 04:23:50,529 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ERROR: TestPayrollCalculationsSprint32.test_full_payslip_with_inputs
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_calculations_sprint32.py", line 329, in test_full_payslip_with_inputs
    self.payslip.action_compute_sheet()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 694, in action_compute_sheet
    self._compute_basic_lines()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 770, in _compute_basic_lines
    self._process_input_lines()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 974, in _process_input_lines
    self._process_allowance(input_line)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 1069, in _process_allowance
    imm = self.indicadores_id.sueldo_minimo
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.economic.indicators' object has no attribute 'sueldo_minimo'
 
2025-11-09 04:23:50,529 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_overtime_hex100 ... 
2025-11-09 04:23:50,555 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,558 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,559 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Procesando 1 inputs para liquidación Test Payslip 
2025-11-09 04:23:50,560 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,051,282, tributable=$1,051,282 
2025-11-09 04:23:50,561 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $21,902 (base: $1,051,282) 
2025-11-09 04:23:50,566 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,732 (1.0% sobre $1,073,184) 
2025-11-09 04:23:50,566 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $25,756 (2.4% sobre $1,073,184) 
2025-11-09 04:23:50,567 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 8 líneas, bruto=$1,109,672, líquido=$905,338 
2025-11-09 04:23:50,568 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $905,338 
2025-11-09 04:23:50,568 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_overtime_hex50 ... 
2025-11-09 04:23:50,594 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,597 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,598 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Procesando 1 inputs para liquidación Test Payslip 
2025-11-09 04:23:50,600 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,076,923, tributable=$1,076,923 
2025-11-09 04:23:50,600 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $22,436 (base: $1,076,923) 
2025-11-09 04:23:50,605 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,994 (1.0% sobre $1,099,359) 
2025-11-09 04:23:50,606 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $26,385 (2.4% sobre $1,099,359) 
2025-11-09 04:23:50,607 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 8 líneas, bruto=$1,136,737, líquido=$927,419 
2025-11-09 04:23:50,607 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $927,419 
2025-11-09 04:23:50,607 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_tax_tramo1_exento ... 
2025-11-09 04:23:50,633 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,636 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE modificado: Test Contract (Estado: open, Sueldo: 500000.0) 
2025-11-09 04:23:50,636 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,638 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$500,000, tributable=$500,000 
2025-11-09 04:23:50,639 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $10,417 (base: $500,000) 
2025-11-09 04:23:50,644 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $5,104 (1.0% sobre $510,417) 
2025-11-09 04:23:50,645 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $12,250 (2.4% sobre $510,417) 
2025-11-09 04:23:50,646 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 7 líneas, bruto=$527,771, líquido=$430,588 
2025-11-09 04:23:50,646 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $430,588 
2025-11-09 04:23:50,646 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_tax_tramo2 ... 
2025-11-09 04:23:50,674 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,676 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE modificado: Test Contract (Estado: open, Sueldo: 1000000.0) 
2025-11-09 04:23:50,676 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,679 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:50,679 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:50,684 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:50,685 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:50,686 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:50,686 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $861,175 
2025-11-09 04:23:50,686 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ====================================================================== 
2025-11-09 04:23:50,686 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: FAIL: TestPayrollCalculationsSprint32.test_tax_tramo2
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_calculations_sprint32.py", line 237, in test_tax_tramo2
    self.assertTrue(tax_line, "Debe existir línea TAX")
AssertionError: hr.payslip.line() is not true : Debe existir línea TAX
 
2025-11-09 04:23:50,687 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: Starting TestPayrollCalculationsSprint32.test_tax_tramo3 ... 
2025-11-09 04:23:50,715 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,717 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE modificado: Test Contract (Estado: open, Sueldo: 2000000.0) 
2025-11-09 04:23:50,717 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación Test Payslip para empleado Test Employee 
2025-11-09 04:23:50,719 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$2,000,000, tributable=$2,000,000 
2025-11-09 04:23:50,720 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $41,667 (base: $2,000,000) 
2025-11-09 04:23:50,724 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Impuesto calculado: base=$1,665,183, impuesto=$29,538 
2025-11-09 04:23:50,725 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $20,417 (1.0% sobre $2,041,667) 
2025-11-09 04:23:50,726 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $49,000 (2.4% sobre $2,041,667) 
2025-11-09 04:23:50,727 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación Test Payslip completada: 8 líneas, bruto=$2,111,083, líquido=$1,692,812 
2025-11-09 04:23:50,727 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación Test Payslip calculada: Líquido = $1,692,812 
2025-11-09 04:23:50,727 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: ====================================================================== 
2025-11-09 04:23:50,727 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_calculations_sprint32: FAIL: TestPayrollCalculationsSprint32.test_tax_tramo3
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_calculations_sprint32.py", line 263, in test_tax_tramo3
    self.assertAlmostEqual(abs(tax_line.total), expected_tax, delta=1000,
AssertionError: 29537.95 != 32575 within 1000 delta (3037.0499999999993 difference) : Impuesto debería ser ~32575
 
2025-11-09 04:23:50,729 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 1 checked, 1 removed 
2025-11-09 04:23:50,729 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_01_cron_job_exists ... 
2025-11-09 04:23:50,732 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_02_fetch_api_success ... 
2025-11-09 04:23:50,732 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: Obteniendo indicadores 2025-06 desde AI-Service 
2025-11-09 04:23:50,735 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: ✅ Indicadores 2025-06 creados desde AI-Service (ID: 578) 
2025-11-09 04:23:50,735 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_03_fetch_api_retry_on_failure ... 
2025-11-09 04:23:50,735 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: 🔄 Cron indicadores: obteniendo 2025-12 
2025-11-09 04:23:50,736 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: Intento 1/3: obteniendo indicadores desde AI-Service... 
2025-11-09 04:23:50,736 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: Obteniendo indicadores 2025-12 desde AI-Service 
2025-11-09 04:23:50,741 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: ✅ Indicadores 2025-12 creados desde AI-Service (ID: 579) 
2025-11-09 04:23:50,741 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: ✅ Indicadores 2025-12 creados en intento 1 
2025-11-09 04:23:50,742 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: ====================================================================== 
2025-11-09 04:23:50,742 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: FAIL: TestIndicatorAutomation.test_03_fetch_api_retry_on_failure
Traceback (most recent call last):
  File "/usr/lib/python3.12/unittest/mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_indicator_automation.py", line 101, in test_03_fetch_api_retry_on_failure
    self.assertEqual(mock_get.call_count, 3, "Debe haber 3 intentos")
AssertionError: 1 != 3 : Debe haber 3 intentos
 
2025-11-09 04:23:50,742 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_04_wizard_import_csv ... 
2025-11-09 04:23:50,749 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_05_cron_idempotent ... 
2025-11-09 04:23:50,751 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: 🔄 Cron indicadores: obteniendo 2025-12 
2025-11-09 04:23:50,752 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_economic_indicators: ℹ️  Indicadores 2025-12 ya existen (ID: 582), skip 
2025-11-09 04:23:50,752 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_06_wizard_csv_validation ... 
2025-11-09 04:23:50,759 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_07_wizard_skip_duplicates ... 
2025-11-09 04:23:50,765 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_indicator_automation: Starting TestIndicatorAutomation.test_08_indicator_consumed_by_payslip ... 
2025-11-09 04:23:50,791 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract Indicators para empleado Test Employee Indicators (2025-01-01 - Indefinido) 
2025-11-09 04:23:50,794 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0154 para empleado Test Employee Indicators 
2025-11-09 04:23:50,796 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:50,797 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:50,801 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:50,802 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:50,803 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0154 completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:50,803 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0154 calculada: Líquido = $861,175 
2025-11-09 04:23:50,805 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 4 checked, 4 removed 
2025-11-09 04:23:50,818 1 INFO odoo19 odoo.tests.suite: ====================================================================== 
2025-11-09 04:23:50,818 1 ERROR odoo19 odoo.tests.suite: ERROR: setUpClass (odoo.addons.l10n_cl_hr_payroll.tests.test_lre_generation.TestLREGeneration)
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_lre_generation.py", line 35, in setUpClass
    cls.indicators = cls.env['hr.economic.indicators'].create({
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'month' in 'hr.economic.indicators'
 
2025-11-09 04:23:50,819 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 0 checked, 0 removed 
2025-11-09 04:23:50,819 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_contract_field_types ... 
2025-11-09 04:23:50,820 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_contract_has_weekly_hours ... 
2025-11-09 04:23:50,820 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_contract_no_jornada_semanal ... 
2025-11-09 04:23:50,820 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_indicator_field_types ... 
2025-11-09 04:23:50,821 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_indicator_has_minimum_wage ... 
2025-11-09 04:23:50,821 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_indicator_has_period_field ... 
2025-11-09 04:23:50,821 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_indicator_no_sueldo_minimo ... 
2025-11-09 04:23:50,822 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_indicator_no_year_month_fields ... 
2025-11-09 04:23:50,822 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_naming_integrity: Starting TestNamingIntegrity.test_payslip_sequence_prefix ... 
2025-11-09 04:23:50,824 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 0 checked, 0 removed 
2025-11-09 04:23:50,824 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_afp_cap_is_831_uf_2025 ... 
2025-11-09 04:23:50,825 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_afp_cap_not_816_uf ... 
2025-11-09 04:23:50,825 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_afp_cap_vigencia ... 
2025-11-09 04:23:50,826 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_get_afp_cap_for_date ... 
2025-11-09 04:23:50,827 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_pr2_get_cap_invalid_code_raises_error ... 
2025-11-09 04:23:50,829 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_pr2_get_cap_method_returns_correct_value ... 
2025-11-09 04:23:50,829 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_pr2_get_cap_missing_cap_raises_error ... 
2025-11-09 04:23:50,831 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_pr2_get_cap_with_none_date_uses_today ... 
2025-11-09 04:23:50,832 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_pr2_get_cap_with_string_date ... 
2025-11-09 04:23:50,832 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_pr2_multiple_validity_periods ... 
2025-11-09 04:23:50,834 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_afp_cap_2025: Starting TestP0AfpCap2025.test_pr2_salary_rule_uses_get_cap ... 
2025-11-09 04:23:50,839 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 0 checked, 0 removed 
2025-11-09 04:23:50,839 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_ir_rule_payslip_exists ... 
2025-11-09 04:23:51,140 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:51,140 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_ir_rule_payslip_exists
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:51,141 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_ir_rule_payslip_run_exists ... 
2025-11-09 04:23:51,389 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:51,389 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_ir_rule_payslip_run_exists
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:51,390 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_shared_master_data_visible_to_all ... 
2025-11-09 04:23:51,698 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:51,699 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_shared_master_data_visible_to_all
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:51,700 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_user_a_cannot_read_company_b_payslip ... 
2025-11-09 04:23:52,003 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:52,003 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_user_a_cannot_read_company_b_payslip
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:52,004 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_user_a_cannot_unlink_company_b_payslip ... 
2025-11-09 04:23:52,249 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:52,250 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_user_a_cannot_unlink_company_b_payslip
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:52,251 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_user_a_sees_only_company_a_payslips ... 
2025-11-09 04:23:52,617 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:52,617 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_user_a_sees_only_company_a_payslips
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:52,619 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_user_b_cannot_write_company_a_payslip ... 
2025-11-09 04:23:52,884 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:52,884 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_user_b_cannot_write_company_a_payslip
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:52,885 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: Starting TestP0MultiCompany.test_user_b_sees_only_company_b_payslips ... 
2025-11-09 04:23:53,219 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ====================================================================== 
2025-11-09 04:23:53,219 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_multi_company: ERROR: TestP0MultiCompany.test_user_b_sees_only_company_b_payslips
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_multi_company.py", line 56, in setUp
    self.user_company_a = self.UserModel.create({
                          ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr_holidays/models/res_users.py", line 68, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/hr/models/res_users.py", line 164, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/digest/models/res_users.py", line 12, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/calendar/models/res_users.py", line 63, in create
    res = super().create(vals_list)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/auth_signup/models/res_users.py", line 270, in create
    users = super(ResUsers, self).create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/discuss/res_users.py", line 14, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/res_users.py", line 182, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 1354, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/base/models/res_users.py", line 580, in create
    users = super().create(vals_list)
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'groups_id' in 'res.users'
 
2025-11-09 04:23:53,221 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 0 checked, 0 removed 
2025-11-09 04:23:53,222 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: Starting TestP0Reforma2025.test_reforma_aplica_contratos_2025 ... 
2025-11-09 04:23:53,258 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato 2024 para empleado Test Employee Reforma (2024-06-01 - Indefinido) 
2025-11-09 04:23:53,261 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ====================================================================== 
2025-11-09 04:23:53,261 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ERROR: TestP0Reforma2025.test_reforma_aplica_contratos_2025
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_reforma_2025.py", line 55, in setUp
    self.contract_2025 = self.env['hr.contract'].create({
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Reforma en el período 2025-01-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:53,261 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: Starting TestP0Reforma2025.test_reforma_calculo_correcto_distintos_sueldos ... 
2025-11-09 04:23:53,294 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato 2024 para empleado Test Employee Reforma (2024-06-01 - Indefinido) 
2025-11-09 04:23:53,295 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ====================================================================== 
2025-11-09 04:23:53,295 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ERROR: TestP0Reforma2025.test_reforma_calculo_correcto_distintos_sueldos
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_reforma_2025.py", line 55, in setUp
    self.contract_2025 = self.env['hr.contract'].create({
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Reforma en el período 2025-01-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:53,296 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: Starting TestP0Reforma2025.test_reforma_fecha_limite_exacta ... 
2025-11-09 04:23:53,324 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato 2024 para empleado Test Employee Reforma (2024-06-01 - Indefinido) 
2025-11-09 04:23:53,326 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ====================================================================== 
2025-11-09 04:23:53,326 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ERROR: TestP0Reforma2025.test_reforma_fecha_limite_exacta
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_reforma_2025.py", line 55, in setUp
    self.contract_2025 = self.env['hr.contract'].create({
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Reforma en el período 2025-01-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:53,326 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: Starting TestP0Reforma2025.test_reforma_no_aplica_contratos_2024 ... 
2025-11-09 04:23:53,352 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato 2024 para empleado Test Employee Reforma (2024-06-01 - Indefinido) 
2025-11-09 04:23:53,353 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ====================================================================== 
2025-11-09 04:23:53,353 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ERROR: TestP0Reforma2025.test_reforma_no_aplica_contratos_2024
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_reforma_2025.py", line 55, in setUp
    self.contract_2025 = self.env['hr.contract'].create({
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Reforma en el período 2025-01-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:53,354 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: Starting TestP0Reforma2025.test_reforma_percentage_accuracy ... 
2025-11-09 04:23:53,380 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato 2024 para empleado Test Employee Reforma (2024-06-01 - Indefinido) 
2025-11-09 04:23:53,381 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ====================================================================== 
2025-11-09 04:23:53,381 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ERROR: TestP0Reforma2025.test_reforma_percentage_accuracy
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_reforma_2025.py", line 55, in setUp
    self.contract_2025 = self.env['hr.contract'].create({
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Reforma en el período 2025-01-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:53,382 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: Starting TestP0Reforma2025.test_reforma_sin_contrato_no_falla ... 
2025-11-09 04:23:53,406 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato 2024 para empleado Test Employee Reforma (2024-06-01 - Indefinido) 
2025-11-09 04:23:53,408 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ====================================================================== 
2025-11-09 04:23:53,408 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_p0_reforma_2025: ERROR: TestP0Reforma2025.test_reforma_sin_contrato_no_falla
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_p0_reforma_2025.py", line 55, in setUp
    self.contract_2025 = self.env['hr.contract'].create({
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee Reforma en el período 2025-01-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:53,410 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 1 checked, 1 removed 
2025-11-09 04:23:53,419 1 INFO odoo19 odoo.tests.suite: ====================================================================== 
2025-11-09 04:23:53,419 1 ERROR odoo19 odoo.tests.suite: ERROR: setUpClass (odoo.addons.l10n_cl_hr_payroll.tests.test_payroll_calculation_p1.TestPayrollCalculationP1)
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payroll_calculation_p1.py", line 43, in setUpClass
    cls.indicators = cls.env['hr.economic.indicators'].create({
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4651, in create
    raise ValueError(f"Invalid field {field_name!r} in {self._name!r}")
ValueError: Invalid field 'month' in 'hr.economic.indicators'
 
2025-11-09 04:23:53,420 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 0 checked, 0 removed 
2025-11-09 04:23:53,421 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: Starting TestPayslipTotals.test_01_total_imponible_single_line ... 
2025-11-09 04:23:53,446 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract SOPA para empleado Test Employee SOPA (2025-01-01 - Indefinido) 
2025-11-09 04:23:53,450 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0155 para empleado Test Employee SOPA 
2025-11-09 04:23:53,452 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:53,453 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:53,457 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:53,458 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:53,459 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0155 completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:53,459 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0155 calculada: Líquido = $861,175 
2025-11-09 04:23:53,460 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: ====================================================================== 
2025-11-09 04:23:53,460 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: FAIL: TestPayslipTotals.test_01_total_imponible_single_line
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_totals.py", line 64, in test_01_total_imponible_single_line
    self.assertEqual(
AssertionError: 1020833.33 != 1000000 : total_imponible debe ser 1.000.000, obtuvo 1,020,833
 
2025-11-09 04:23:53,460 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: Starting TestPayslipTotals.test_02_afp_uses_total_imponible ... 
2025-11-09 04:23:53,485 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract SOPA para empleado Test Employee SOPA (2025-01-01 - Indefinido) 
2025-11-09 04:23:53,488 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0156 para empleado Test Employee SOPA 
2025-11-09 04:23:53,491 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:53,495 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:53,520 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:53,526 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:53,530 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0156 completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:53,530 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0156 calculada: Líquido = $861,175 
2025-11-09 04:23:53,530 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: ====================================================================== 
2025-11-09 04:23:53,530 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: FAIL: TestPayslipTotals.test_02_afp_uses_total_imponible
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_totals.py", line 85, in test_02_afp_uses_total_imponible
    self.assertAlmostEqual(
AssertionError: 116783.33 != 114400 within 10 delta (2383.3300000000017 difference) : AFP debe ser ~114.400, obtuvo 116,783
 
2025-11-09 04:23:53,531 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: Starting TestPayslipTotals.test_03_health_fonasa_uses_total_imponible ... 
2025-11-09 04:23:53,580 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract SOPA para empleado Test Employee SOPA (2025-01-01 - Indefinido) 
2025-11-09 04:23:53,584 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0157 para empleado Test Employee SOPA 
2025-11-09 04:23:53,586 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:53,587 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:53,592 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:53,593 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:53,594 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0157 completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:53,594 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0157 calculada: Líquido = $861,175 
2025-11-09 04:23:53,594 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: ====================================================================== 
2025-11-09 04:23:53,594 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: FAIL: TestPayslipTotals.test_03_health_fonasa_uses_total_imponible
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_totals.py", line 107, in test_03_health_fonasa_uses_total_imponible
    self.assertAlmostEqual(
AssertionError: 71458.33 != 70000 within 10 delta (1458.3300000000017 difference) : FONASA debe ser ~70.000, obtuvo 71,458
 
2025-11-09 04:23:53,595 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: Starting TestPayslipTotals.test_04_net_wage_calculation ... 
2025-11-09 04:23:53,625 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract SOPA para empleado Test Employee SOPA (2025-01-01 - Indefinido) 
2025-11-09 04:23:53,629 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0158 para empleado Test Employee SOPA 
2025-11-09 04:23:53,632 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:53,633 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:53,638 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:53,640 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:53,641 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0158 completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:53,641 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0158 calculada: Líquido = $861,175 
2025-11-09 04:23:53,641 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: ====================================================================== 
2025-11-09 04:23:53,641 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: FAIL: TestPayslipTotals.test_04_net_wage_calculation
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_totals.py", line 128, in test_04_net_wage_calculation
    self.assertAlmostEqual(
AssertionError: 861175.0 != 815600 within 100 delta (45575.0 difference) : Líquido debe ser ~815,600, obtuvo 861,175
 
2025-11-09 04:23:53,642 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: Starting TestPayslipTotals.test_05_sequence_generation ... 
2025-11-09 04:23:53,671 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract SOPA para empleado Test Employee SOPA (2025-01-01 - Indefinido) 
2025-11-09 04:23:53,675 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_totals: Starting TestPayslipTotals.test_06_line_categories_correct ... 
2025-11-09 04:23:53,707 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Test Contract SOPA para empleado Test Employee SOPA (2025-01-01 - Indefinido) 
2025-11-09 04:23:53,711 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Calculando liquidación LIQ-202511-0160 para empleado Test Employee SOPA 
2025-11-09 04:23:53,714 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Totalizadores: imponible=$1,000,000, tributable=$1,000,000 
2025-11-09 04:23:53,714 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Gratificación calculada: $20,833 (base: $1,000,000) 
2025-11-09 04:23:53,720 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Aporte empleador AFP: $10,208 (1.0% sobre $1,020,833) 
2025-11-09 04:23:53,722 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ AFC empleador: $24,500 (2.4% sobre $1,020,833) 
2025-11-09 04:23:53,723 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: ✅ Liquidación LIQ-202511-0160 completada: 7 líneas, bruto=$1,055,542, líquido=$861,175 
2025-11-09 04:23:53,724 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_payslip: Liquidación LIQ-202511-0160 calculada: Líquido = $861,175 
2025-11-09 04:23:53,727 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 1 checked, 1 removed 
2025-11-09 04:23:53,728 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_allows_complete_payslip ... 
2025-11-09 04:23:53,899 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:53,922 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:53,922 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_allows_complete_payslip
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 243, in test_validation_allows_complete_payslip
    payslip_completo._compute_employer_reforma_2025()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute '_compute_employer_reforma_2025'
 
2025-11-09 04:23:53,923 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_blocks_missing_afp ... 
2025-11-09 04:23:54,071 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:54,073 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Sin AFP para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:54,098 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:54,098 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_blocks_missing_afp
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 217, in test_validation_blocks_missing_afp
    payslip_sin_afp.write({'state': 'done'})
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 383, in write
    result = super().write(vals)
             ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4488, in write
    real_recs._validate_fields(vals, inverse_fields)
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 570, in _validate_payslip_before_confirm
    if not payslip.employer_reforma_2025 or payslip.employer_reforma_2025 == 0:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:54,099 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_blocks_missing_indicadores ... 
2025-11-09 04:23:54,285 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:54,304 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:54,304 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_blocks_missing_indicadores
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 135, in test_validation_blocks_missing_indicadores
    payslip_sin_indicadores._compute_employer_reforma_2025()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute '_compute_employer_reforma_2025'
 
2025-11-09 04:23:54,305 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_blocks_missing_reforma ... 
2025-11-09 04:23:54,497 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:54,500 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:54,500 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_blocks_missing_reforma
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 103, in test_validation_blocks_missing_reforma
    payslip.employer_reforma_2025 = 0
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:54,501 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_blocks_missing_rut ... 
2025-11-09 04:23:54,656 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:54,672 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Sin RUT para empleado Sin RUT (2025-01-01 - Indefinido) 
2025-11-09 04:23:54,692 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:54,692 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_blocks_missing_rut
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 179, in test_validation_blocks_missing_rut
    payslip_sin_rut._compute_employer_reforma_2025()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute '_compute_employer_reforma_2025'
 
2025-11-09 04:23:54,693 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_contrato_2024_sin_reforma_es_valido ... 
2025-11-09 04:23:54,858 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:54,860 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:54,860 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_contrato_2024_sin_reforma_es_valido
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 268, in test_validation_contrato_2024_sin_reforma_es_valido
    contract_2024 = self.env['hr.contract'].create({
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 300, in create
    contracts = super(HrContract, self).create(vals_list)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 320, in create
    threads = super(MailThread, self).create(vals_list)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/decorators.py", line 365, in create
    return method(self, vals_list)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4706, in create
    records = self._create(data_list)
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4944, in _create
    records._validate_fields(name for data in data_list for name in data['stored'])
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_contract_stub_ce.py", line 249, in _check_overlap_contracts
    raise ValidationError(_(
odoo.exceptions.ValidationError: Ya existe un contrato vigente para el empleado Test Employee en el período 2024-06-01 - Indefinido que se superpone con este contrato.
 
2025-11-09 04:23:54,861 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_error_message_format ... 
2025-11-09 04:23:55,018 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:55,035 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Multi Errors para empleado Multi Errors (2025-01-01 - Indefinido) 
2025-11-09 04:23:55,064 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:55,064 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_error_message_format
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 339, in test_validation_error_message_format
    payslip_errores.write({'state': 'done'})
  File "/usr/lib/python3/dist-packages/odoo/addons/mail/models/mail_thread.py", line 383, in write
    result = super().write(vals)
             ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 4488, in write
    real_recs._validate_fields(vals, inverse_fields)
  File "/usr/lib/python3/dist-packages/odoo/orm/models.py", line 1268, in _validate_fields
    check(records)
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 570, in _validate_payslip_before_confirm
    if not payslip.employer_reforma_2025 or payslip.employer_reforma_2025 == 0:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:55,064 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: Starting TestPayslipValidations.test_validation_only_applies_on_confirm ... 
2025-11-09 04:23:55,246 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Test Employee (2025-01-01 - Indefinido) 
2025-11-09 04:23:55,258 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ====================================================================== 
2025-11-09 04:23:55,258 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_payslip_validations: ERROR: TestPayslipValidations.test_validation_only_applies_on_confirm
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_payslip_validations.py", line 372, in test_validation_only_applies_on_confirm
    payslip_draft.employer_reforma_2025 = 0
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:55,268 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 3 checked, 3 removed 
2025-11-09 04:23:55,270 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_action_export_previred_crea_attachment ... 
2025-11-09 04:23:55,450 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:55,471 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:55,471 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_action_export_previred_crea_attachment
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 361, in test_action_export_previred_crea_attachment
    payslip._compute_employer_reforma_2025()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute '_compute_employer_reforma_2025'
 
2025-11-09 04:23:55,472 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_previred_book49_formato_correcto ... 
2025-11-09 04:23:55,634 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:55,656 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:55,656 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_previred_book49_formato_correcto
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 101, in test_previred_book49_formato_correcto
    payslip._compute_employer_reforma_2025()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute '_compute_employer_reforma_2025'
 
2025-11-09 04:23:55,657 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_previred_encoding_latin1 ... 
2025-11-09 04:23:55,816 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:55,836 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:55,836 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_previred_encoding_latin1
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 407, in test_previred_encoding_latin1
    payslip._compute_employer_reforma_2025()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute '_compute_employer_reforma_2025'
 
2025-11-09 04:23:55,837 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_previred_export_incluye_reforma_2025 ... 
2025-11-09 04:23:55,981 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:56,002 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:56,002 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_previred_export_incluye_reforma_2025
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 169, in test_previred_export_incluye_reforma_2025
    payslip._compute_employer_reforma_2025()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute '_compute_employer_reforma_2025'
 
2025-11-09 04:23:56,003 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_previred_validation_bloquea_sin_afp ... 
2025-11-09 04:23:56,168 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:56,170 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Sin AFP para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:56,196 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:56,196 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_previred_validation_bloquea_sin_afp
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 302, in test_previred_validation_bloquea_sin_afp
    payslip_sin_afp._validate_previred_export()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 1794, in _validate_previred_export
    if not self.employer_reforma_2025 or self.employer_reforma_2025 == 0:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:56,197 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_previred_validation_bloquea_sin_indicadores ... 
2025-11-09 04:23:56,361 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:56,388 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:56,388 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_previred_validation_bloquea_sin_indicadores
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 226, in test_previred_validation_bloquea_sin_indicadores
    payslip_sin_indicadores._validate_previred_export()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 1794, in _validate_previred_export
    if not self.employer_reforma_2025 or self.employer_reforma_2025 == 0:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:56,389 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_previred_validation_bloquea_sin_reforma_2025 ... 
2025-11-09 04:23:56,548 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:56,551 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:56,551 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_previred_validation_bloquea_sin_reforma_2025
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 330, in test_previred_validation_bloquea_sin_reforma_2025
    payslip_sin_reforma.employer_reforma_2025 = 0
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:56,552 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: Starting TestPreviredIntegration.test_previred_validation_bloquea_sin_rut_trabajador ... 
2025-11-09 04:23:56,696 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contrato Test para empleado Juan Pérez (2025-01-01 - Indefinido) 
2025-11-09 04:23:56,711 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.models.hr_contract_stub_ce: Contrato CE creado: Contract Sin RUT para empleado Sin RUT (2025-01-01 - Indefinido) 
2025-11-09 04:23:56,737 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ====================================================================== 
2025-11-09 04:23:56,737 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_previred_integration: ERROR: TestPreviredIntegration.test_previred_validation_bloquea_sin_rut_trabajador
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_previred_integration.py", line 267, in test_previred_validation_bloquea_sin_rut_trabajador
    payslip_sin_rut._validate_previred_export()
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/models/hr_payslip.py", line 1794, in _validate_previred_export
    if not self.employer_reforma_2025 or self.employer_reforma_2025 == 0:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'hr.payslip' object has no attribute 'employer_reforma_2025'
 
2025-11-09 04:23:56,739 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 2 checked, 2 removed 
2025-11-09 04:23:56,740 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: Starting TestSOPACategories.test_01_categories_exist ... 
2025-11-09 04:23:56,740 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: Starting TestSOPACategories.test_02_category_base_exists ... 
2025-11-09 04:23:56,741 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: Starting TestSOPACategories.test_03_category_hierarchy ... 
2025-11-09 04:23:56,742 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: Starting TestSOPACategories.test_04_imponible_flags ... 
2025-11-09 04:23:56,743 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: Starting TestSOPACategories.test_05_code_unique_constraint ... 
2025-11-09 04:23:56,746 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: ====================================================================== 
2025-11-09 04:23:56,746 1 ERROR odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: FAIL: TestSOPACategories.test_05_code_unique_constraint
Traceback (most recent call last):
  File "/mnt/extra-addons/localization/l10n_cl_hr_payroll/tests/test_sopa_categories.py", line 60, in test_05_code_unique_constraint
    with self.assertRaises(Exception):  # IntegrityError o ValidationError
  File "/usr/lib/python3.12/contextlib.py", line 144, in __exit__
    next(self.gen)
  File "/usr/lib/python3/dist-packages/odoo/tests/common.py", line 533, in _assertRaises
    with ExitStack() as inner:
  File "/usr/lib/python3.12/contextlib.py", line 610, in __exit__
    raise exc_details[1]
  File "/usr/lib/python3.12/contextlib.py", line 595, in __exit__
    if cb(*exc_details):
       ^^^^^^^^^^^^^^^^
AssertionError: Exception not raised
 
2025-11-09 04:23:56,746 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: Starting TestSOPACategories.test_06_descuentos_legales_exist ... 
2025-11-09 04:23:56,747 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_sopa_categories: Starting TestSOPACategories.test_07_totalizadores_exist ... 
2025-11-09 04:23:56,750 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 0 checked, 0 removed 
2025-11-09 04:23:56,750 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_bracket_name_generation ... 
2025-11-09 04:23:56,753 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_bracket_validation_range ... 
2025-11-09 04:23:56,757 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_bracket_validation_tasa ... 
2025-11-09 04:23:56,761 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_bracket_validation_vigencia_day ... 
2025-11-09 04:23:56,765 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_brackets_exist_in_database ... 
2025-11-09 04:23:56,767 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_calculate_tax_extreme_zone_50percent_rebaja ... 
2025-11-09 04:23:56,770 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_calculate_tax_tramo1_exento ... 
2025-11-09 04:23:56,773 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_calculate_tax_tramo2_4percent ... 
2025-11-09 04:23:56,775 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_calculate_tax_tramo3_8percent ... 
2025-11-09 04:23:56,778 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_calculate_tax_tramo8_sin_limite ... 
2025-11-09 04:23:56,780 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_get_brackets_for_date ... 
2025-11-09 04:23:56,784 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_no_brackets_for_date_raises_error ... 
2025-11-09 04:23:56,787 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_no_hardcoded_brackets_in_code ... 
2025-11-09 04:23:56,791 1 INFO odoo19 odoo.models.unlink: User #1 deleted hr.tax.bracket records with IDs: [48] 
2025-11-09 04:23:56,791 1 INFO odoo19 odoo.addons.l10n_cl_hr_payroll.tests.test_tax_brackets: Starting TestTaxBrackets.test_tax_calculation_deterministic ... 
2025-11-09 04:23:56,796 1 INFO odoo19 odoo.addons.base.models.ir_attachment: filestore gc 0 checked, 0 removed 
2025-11-09 04:23:56,796 1 INFO odoo19 odoo.service.server: 104 post-tests in 6.92s, 16964 queries 
2025-11-09 04:23:56,797 1 INFO odoo19 odoo.tests.stats: l10n_cl_hr_payroll: 155 tests 7.67s 18292 queries 
2025-11-09 04:23:56,797 1 INFO odoo19 odoo.service.server: Stopping workers gracefully 

