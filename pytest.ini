[pytest]
addopts =
    --verbose
    --strict-markers
    --tb=short
    --cov=addons/localization/l10n_cl_dte
    --cov=addons/localization/l10n_cl_financial_reports
    --cov=addons/localization/l10n_cl_hr_payroll
    --cov-report=html:htmlcov
    --cov-report=term-missing
    --cov-report=xml
    --cov-fail-under=85
    -p no:warnings

testpaths =
    addons/localization/l10n_cl_dte/tests
    addons/localization/l10n_cl_financial_reports/tests
    addons/localization/l10n_cl_hr_payroll/tests

python_files =
    test_*.py

python_classes =
    Test*

python_functions =
    test_*

markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (medium speed, DB required)
    e2e: End-to-end tests (slow, full stack)
    performance: Performance benchmarks
    security: Security tests
    smoke: Smoke tests (critical paths only)
    slow: Slow tests (skip in CI)

# Coverage settings
[coverage:run]
source = addons/localization/l10n_cl_dte
omit =
    */tests/*
    */migrations/*
    */__pycache__/*
    */static/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstractmethod

precision = 2
show_missing = True
skip_covered = False

[coverage:html]
directory = htmlcov
