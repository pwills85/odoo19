% !TeX program = pdflatex
\documentclass[11pt,a4paper]{article}
\usepackage[spanish,es-tabla]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{mathptmx}
\usepackage[scaled]{helvet}
\renewcommand\familydefault{\sfdefault}
\usepackage{microtype}
\usepackage[a4paper,margin=2.3cm]{geometry}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{float}
\usepackage{xcolor}
\usepackage{fancyhdr}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{tikz}
\usetikzlibrary{arrows.meta,positioning,fit,shapes,calc}
\hypersetup{colorlinks=true,linkcolor=blue!50!black,urlcolor=blue!50!black,citecolor=blue!50!black,pdfauthor={Odoo 18 CE Chile},pdftitle={Informe Técnico - account_financial_report}}
\pagestyle{fancy}\fancyhf{}\lhead{Informe Técnico — account\_financial\_report}\rhead{Odoo 18 CE (Chile)}\cfoot{\thepage}
\definecolor{brand}{RGB}{12,89,140}
\titleformat{\section}{\Large\bfseries\color{brand}}{}{0em}{}\titleformat{\subsection}{\large\bfseries\color{brand}}{}{0em}{}\titleformat{\subsubsection}{\normalsize\bfseries\color{brand}}{}{0em}{}
\setlist{nosep,leftmargin=1.2em}
\begin{document}
\begin{center}{\LARGE \textbf{Informe Técnico}}\\[2pt]{\large account\_financial\_report — Suite Chilena Odoo 18 CE}\\[4pt]\textit{Integración, arquitectura, seguridad, performance y cumplimiento SII}\end{center}\vspace{0.4cm}
\section{Resumen Ejecutivo}
El módulo \texttt{account\_financial\_report} provee reportes financieros avanzados para Chile (Balance, P\&G, Mayor, Comprobación, comparativos), F29/F22 reales con SII, dashboards ejecutivos y análisis de ratios. Integra con Odoo base (\texttt{account}, \texttt{report\_xlsx}, \texttt{project}, \texttt{hr\_timesheet}, \texttt{account\_budget}) y con la suite chilena (\texttt{l10n\_cl\_base}, \texttt{l10n\_cl\_fe}, \texttt{l10n\_cl\_payroll}).
\section{Arquitectura y Componentes}
\subsection{Servicios principales}
\begin{itemize}\item \textbf{financial\_report\_service}: Balance 8 columnas, Balance, P\&G, Mayor, Comprobación, comparativos.\item \textbf{financial\_report\_sii\_service}: Cálculos reales F22/F29 (mapeos SII) y comunicación SII.\item \textbf{ratio\_analysis\_service}: Ratios (DuPont, Altman Z, etc.).\item \textbf{bi\_dashboard\_service}: KPIs y dashboard Ejecutivo/BI.\end{itemize}
\subsection{Modelos y datos}
\begin{itemize}\item Modelos F29/F22 agregan desde \texttt{account\_move\_line} y \texttt{account\_tax}.\item Vistas/plantillas para menús, wizards, dashboards y exportaciones.\end{itemize}
\section{Integraciones}
\subsection{Suite Chilena}
\begin{itemize}\item \textbf{l10n\_cl\_base}: utilitarios (RUT, cache), códigos SII.\item \textbf{l10n\_cl\_fe}: DTE/CAF; estados SII y folios.\item \textbf{l10n\_cl\_payroll}: nómina y KPIs vinculados.\end{itemize}
\subsection{Odoo base}
\begin{itemize}\item \textbf{account}: asientos/impuestos.\item \textbf{report\_xlsx}: exportación profesional.\item \textbf{project}/\textbf{hr\_timesheet}/\textbf{account\_budget}: analítica por proyecto/horas/presupuesto.\end{itemize}
\section{Seguridad}
\begin{itemize}\item \texttt{secure\_api\_endpoint}: JWT (HS256), HMAC-SHA256, CSRF=\texttt{True}, rate limiting, sanitización XSS.\item Manejo de errores sin datos sensibles; logging seguro.\end{itemize}
\section{Performance y Caché}
\begin{itemize}\item Índices SQL especializados (AML, AM, TAX, F22/F29).\item Caché multicapa: L1 (env.cache), L2 (servicio), L3 (\texttt{ir.config\_parameter}), L4 (buffers PG).\item ORM optimizado (\texttt{read\_group}, prefetch, batch).\end{itemize}
\section{Diagramas (resumen)}
\subsection{Dependencias}
\begin{figure}[H]\centering\begin{tikzpicture}[node distance=8mm,every node/.style={rounded corners, draw=brand, thick, align=center, inner sep=2.8pt},>={Stealth[length=3mm]}]
\node[fill=brand!10] (afr) {account\_financial\_report};
\node[below left=of afr] (acc) {account};\node[below=of afr] (xlsx) {report\_xlsx};\node[below right=of afr] (proj) {project/hr\_timesheet};\node[left=of afr] (base) {base/date\_range};\node[right=of afr] (bud) {account\_budget};\node[above left=of afr] (l10n) {l10n\_cl\_base};\node[above=of afr] (fe) {l10n\_cl\_fe};\node[above right=of afr] (pay) {l10n\_cl\_payroll};
\draw[->,thick] (afr) -- (acc);\draw[->,thick] (afr) -- (xlsx);\draw[->,thick] (afr) -- (proj);\draw[->,thick] (afr) -- (base);\draw[->,thick] (afr) -- (bud);\draw[->,thick] (l10n) -- (afr);\draw[->,thick] (fe) -- (afr);\draw[->,thick] (pay) -- (afr);\end{tikzpicture}\caption{Dependencias e integración.}\end{figure}
\section{Conclusiones}
Arquitectura SOA madura, seguridad empresarial, performance líder (3--6x), y cumplimiento SII integral. Listo para producción.\end{document}
