<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
    ═══════════════════════════════════════════════════════════════════════════
    ARQUITECTURA DE MENÚS: l10n_cl_dte + Odoo 19 CE Base
    ═══════════════════════════════════════════════════════════════════════════

    PATRÓN DE INTEGRACIÓN (Odoo Best Practices):

    1. MODELOS BASE DE ODOO (account.move, stock.picking, purchase.order):
       ✅ NO creamos menús duplicados
       ✅ Usuarios acceden mediante menús estándar de Odoo:
          - Facturas: Contabilidad > Clientes > Invoices
          - Notas de Crédito: Contabilidad > Clientes > Credit Notes
          - Guías de Despacho: Inventario > Operaciones > Transfers
          - Órdenes de Compra: Compras > Órdenes > Purchase Orders
       ✅ Campos DTE aparecen automáticamente (herencia de vistas)
       ✅ Botones DTE disponibles en vistas heredadas

    2. FUNCIONALIDAD ESPECÍFICA DTE (este archivo):
       ✅ SÍ creamos menús para funcionalidad NUEVA no presente en Odoo base:
          - Recepción de DTEs (dte.inbox)
          - RCV - Registro de Compras y Ventas (l10n_cl_rcv_period/entry)
          - Libros tributarios (dte.libro, dte.libro.guias)
          - Comunicaciones SII (dte.communication)
          - Disaster Recovery (dte.backup, dte.failed.queue, dte.contingency)
          - Documentos Especiales (retenciones IUE, boletas honorarios)
          - Configuración DTE (certificados, CAF, tasas)

    BENEFICIOS:
    - Consistente con módulos de otros países (l10n_mx_edi, l10n_co_edi)
    - Navegación intuitiva (usuarios encuentran facturas donde siempre están)
    - Sin duplicación (DRY principle)
    - Curva de aprendizaje reducida
    - Mantenimiento simplificado

    Ref: AUDITORIA_INTEGRACION_MENUS_VISTAS_ODOO19.md (2025-11-02)
    ═══════════════════════════════════════════════════════════════════════════
    -->

    <!-- ══════════════════════════════════════════════════════════════════
         MENÚ PRINCIPAL DTE CHILE
         Ubicación: Contabilidad > DTE Chile
         ══════════════════════════════════════════════════════════════════ -->

    <menuitem
        id="menu_dte_root"
        name="DTE Chile"
        parent="account.menu_finance"
        sequence="10"/>

    <!-- ══════════════════════════════════════════════════════════════════
         DOCUMENTOS ESPECIALES CHILENOS
         Documentos tributarios específicos de legislación chilena que NO
         tienen equivalente directo en modelos base de Odoo
         ══════════════════════════════════════════════════════════════════ -->

    <menuitem
        id="menu_dte_operations"
        name="Documentos Especiales"
        parent="menu_dte_root"
        sequence="15"/>

    <!-- Retenciones IUE (Impuesto Único Electrónico) - DTE específico chileno -->
    <menuitem
        id="menu_retencion_iue"
        name="Retenciones IUE"
        parent="menu_dte_operations"
        action="action_retencion_iue"
        sequence="10"/>

    <!-- Boletas de Honorarios - Documento tributario específico chileno -->
    <menuitem
        id="menu_boleta_honorarios"
        name="Boletas de Honorarios"
        parent="menu_dte_operations"
        action="action_boleta_honorarios"
        sequence="20"/>

    <!-- ══════════════════════════════════════════════════════════════════
         RECEPCIÓN DE COMPRAS
         ══════════════════════════════════════════════════════════════════ -->

    <menuitem
        id="menu_dte_inbox"
        name="DTEs Recibidos"
        parent="menu_dte_root"
        action="action_dte_inbox"
        sequence="20"/>

    <!-- ══════════════════════════════════════════════════════════════════
         REPORTES SII
         ══════════════════════════════════════════════════════════════════ -->

    <menuitem
        id="menu_dte_reportes"
        name="Reportes SII"
        parent="menu_dte_root"
        sequence="30"/>

    <!-- ⭐ NEW (Sprint 1 - 2025-11-01): RCV - Registro de Compras y Ventas (Res. SII 61/2017) -->
    <menuitem
        id="menu_l10n_cl_rcv_periods"
        name="RCV - Períodos Mensuales"
        parent="menu_dte_reportes"
        action="action_l10n_cl_rcv_period"
        sequence="5"/>

    <menuitem
        id="menu_l10n_cl_rcv_entries"
        name="RCV - Entradas"
        parent="menu_dte_reportes"
        action="action_l10n_cl_rcv_entry"
        sequence="6"/>

    <!-- ⭐ NEW (Sprint 2 - 2025-11-02): Wizard Importar CSV RCV -->
    <menuitem
        id="menu_rcv_csv_import_wizard"
        name="Importar CSV RCV"
        parent="menu_dte_reportes"
        action="action_rcv_csv_import_wizard"
        sequence="7"/>

    <!-- Libro de Compra/Venta (OBSOLETO - reemplazado por RCV desde Aug 2017) -->
    <menuitem
        id="menu_dte_libro_compra_venta"
        name="Libro Compra/Venta (Legacy)"
        parent="menu_dte_reportes"
        action="action_dte_libro"
        sequence="10"/>

    <!-- Libro de Guías -->
    <menuitem
        id="menu_dte_libro_guias"
        name="Libro de Guías"
        parent="menu_dte_reportes"
        action="action_dte_libro_guias"
        sequence="20"/>

    <!-- Consumo de Folios -->
    <menuitem
        id="menu_dte_consumo_folios"
        name="Consumo de Folios"
        parent="menu_dte_reportes"
        sequence="30"/>

    <!-- ══════════════════════════════════════════════════════════════════
         COMUNICACIONES SII
         ══════════════════════════════════════════════════════════════════ -->

    <menuitem
        id="menu_dte_communications"
        name="Comunicaciones SII"
        parent="menu_dte_root"
        action="action_dte_communication"
        sequence="40"/>

    <!-- ══════════════════════════════════════════════════════════════════
         DISASTER RECOVERY (Native)
         ══════════════════════════════════════════════════════════════════ -->

    <!-- DTE Backups -->
    <menuitem
        id="menu_dte_backup"
        name="DTE Backups"
        parent="menu_dte_root"
        action="action_dte_backup"
        sequence="60"/>

    <!-- Failed DTEs Queue -->
    <menuitem
        id="menu_dte_failed_queue"
        name="Failed DTEs Queue"
        parent="menu_dte_root"
        action="action_dte_failed_queue"
        sequence="61"/>

    <!-- ══════════════════════════════════════════════════════════════════
         CONTINGENCY MODE (SII Regulatory Requirement)
         ══════════════════════════════════════════════════════════════════ -->

    <!-- Contingency Status -->
    <menuitem
        id="menu_dte_contingency"
        name="Contingency Status"
        parent="menu_dte_root"
        action="action_dte_contingency"
        sequence="70"
        groups="account.group_account_user"/>

    <!-- Pending DTEs (Contingency) -->
    <menuitem
        id="menu_dte_contingency_pending"
        name="Pending DTEs (Contingency)"
        parent="menu_dte_root"
        action="action_dte_contingency_pending"
        sequence="71"
        groups="account.group_account_user"/>

    <!-- ══════════════════════════════════════════════════════════════════
         CONFIGURACIÓN DTE
         ══════════════════════════════════════════════════════════════════ -->

    <menuitem
        id="menu_dte_configuration"
        name="Configuración"
        parent="menu_dte_root"
        sequence="100"/>

    <!-- Certificados Digitales -->
    <menuitem
        id="menu_dte_certificates"
        name="Certificados Digitales"
        parent="menu_dte_configuration"
        action="action_dte_certificate"
        sequence="10"/>

    <!-- CAF (Folios) -->
    <menuitem
        id="menu_dte_caf"
        name="CAF (Folios)"
        parent="menu_dte_configuration"
        action="action_dte_caf"
        sequence="20"/>

    <!-- Tasas de Retención IUE -->
    <menuitem
        id="menu_retencion_iue_tasa"
        name="Tasas de Retención IUE"
        parent="menu_dte_configuration"
        action="action_retencion_iue_tasa"
        sequence="30"/>

    <!-- ⭐ TEMPORALMENTE DESACTIVADO: base.action_res_config_settings no existe en Odoo 19
    <menuitem
        id="menu_dte_settings"
        name="Configuración General"
        parent="menu_dte_configuration"
        action="base.action_res_config_settings"
        sequence="100"/>
    -->

</odoo>
